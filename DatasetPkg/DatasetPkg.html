<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R Dataset Pkg</title>
    <meta charset="utf-8" />
    <meta name="author" content="🌈 Zane Dax (She/They) 🌈" />
    <meta name="date" content="2022-02-10" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R Dataset Pkg
## <br/>with R-Ladies Boulder
### 🌈 Zane Dax (She/They) 🌈
### <span class="citation">@StarTrek_Lt</span>
### 2022-02-10

---






class: inverse,center
background-image: url("slides_files/RLadies\ bg.png")
# Required R pkgs 
![pkgs](img/rpkgs.png)


---
# R data pkg instructions 📄

## GitHub 1st (recommended)

- GitHub &gt; create new repository &gt; NAME, Public and README
- copy the HTTPS url link
- RStudio File &gt; New Project &gt; Version Control 
- paste in the url
- in the console: 

```
library(devtools)
library(roxygen2)
library(usethis)

# install.packages("here")
here::here()    # for pkg management

create_package(path=".") 
# this creates a pkg inside a repo instead of a folder
```

You want to override existing package, a new RStudio session will open 
and will have the Build tab on top right panel.

**Credit:**
This content is mostly from **Allison Hill** and the **r4edu** [Book](https://rstudio4edu.github.io/rstudio4edu-book/), chapter 12. 





---
# Necessary files 🔺

In the Files folder you should see

- `.gitignore`
- `.Rbuildignore`
- `DESCRIPTION`
- `NAMESPACE`
- `.RData`
- `.Rhistory`
- `&lt;your-pkg-name&gt;.Rproj`
- `R/`

commit and push to GitHub. 


---
# Add data 📔 📶

Any `.R` file or files used for pre-processing goes into `data-raw/`

```
usethis::use_data_raw()  # This creates a data-raw folder.
```

add content in the `DATASET.R` file, 
add whatever, *it does not impact the use of your package*.

You could have inside the DATASET.R file

| Idea   1                     | Idea 2   |
|------------------------------|----------|
| starwars =  dplyr::starwars  | library(tidytuesdayR) |
| starwars = starwars          | tuesdata = tidytuesdayR::tt_load('2021-12-14') |
|                              | studio_album_tracks = tuesdata$studio_album_tracks |
| usethis::use_data(starwars, overwrite = TRUE) | usethis::use_data(studio_album_tracks, overwrite = TRUE) |

1. load `library()` / libraries
2. **read in the data** &amp; data clean (if you want)
3. `usethis::use_data()`
4. hit the **source** button, this creates a data/ folder




---
# Build &amp; Load it  🏗️

In RStudio: Build tab &gt; More &gt; Load All. This loads all of your .R and data files.


Now in the console, type the `YOUR_PACKAGE`::`SPECIFIC_DATASET`


this will load the dataset.

&lt;img height='250' src='img/img1.png'&gt;

This is my RLadiesData package and the datasets I have.



---
# Check it ✅

You want to do some checks on the pkg, in the console

`devtools::check()`

commit &amp; push to GitHub



---
# Document the dataset(s) 📄

In console: `usethis::use_r("DATASET_NAME")` . Repeat this for each dataset you 
have. And in the new .R file, add **roxygen** comments, I use `devtools::document()`.

There are **three main ways** to run roxygen:

- *`roxygen2::roxygenise()`* | *`Ctrl + Shift + D`* | *`devtools::document()`*.  


For further details, click [Roxygen docs](https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html)

Roxygen comments look like this:
```
#' RLadiesData
#' The World Happiness Report (2016) ranks 156 countries by their happiness levels.
#' @format A tibble with 157 rows and 14 variables:
#' \describe{
#'   \item{Country}{chr The name of the Country}
         .
         .
         .
#' }
#' @source \url{RLadies Freiburg}
"Happiness"
``` 





---
# Help file ❓️📄

To get the help file to your dataset in your package,
in the console you type `?DATASET_NAME` to get the file to open in the **Help** tab.

&lt;img height='400', align='right', src='img/img3.png'&gt;


#### Test this out for each of your datasets

For this example I typed `?Happiness`





---
# Document the pkg 📄

This is when you open the DESCRIPTION file, and edit the content with your information.

You should see 
```
Package: NAME OF YOUR PACKAGE
Title: NAME OF YOUR PACKAGE
Version: 0.0.1
Authors@R: 
    person("FIRST", "LAST", , "FAKE@email.com", role = c("aut", "cre"),
           comment = c(ORCID = "YOUR-ORCID-ID"))
Description: What the package does (one paragraph).
License: CC BY 4.0
Encoding: UTF-8
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.2
Depends: 
    R (&gt;= 2.10)
LazyData: true
URL: https://YOUR_GITHUB-NAME.github.io/PACKAGE_NAME
```




---
# Check it ✅ ✅

You want to do some checks on the pkg, in the console

`usethis::use_package_doc()`

`devtools::document()`

`devtools::check()`

This is when you want to use a license, an option is:
`usethis::use_agpl_license()` but there are many others.

commit &amp; push to GitHub


---
# Install it ⬇️

This is when you get to install your own package!

- `devtools::install("path-to-github-pkg")` 
- `remotes::install_github()`
- ex: `remotes::install_github("PythonCoderUnicorn/RLadiesData")`

Then load **your package**

- `library("your-pkg-name")` 
- `pkgName::dataset1`


&lt;img height='250', align='right', src='img/img5.png'&gt;



---
# GitHub Pages 📄💻

Every respectable R package has a website for the package, you can make this
happen with 1 function call! 

In the console, type `usethis::use_pkgdown_github_pages()`


**commit &amp; push to GitHub**. Then go to **Actions** tab, where you will see
`pkgdown` do the function calls to make your pkg website that includes your
vignettes. You need to click on top / first workflow to get it started, at the end you will have a active **url link** which is automatically posted in your README.

&lt;img height='280' src='img/img4.png'&gt;







---
# Pkg Delivery 📦 🚚

This is when you edit your README file and post the very useful code of how to install 
your package.

To have code that a person can copy &amp; paste, use 3 ` (back ticks) before and after the 
code.

### Install package

'''
```
remotes::install_github("YOUR-GITHUB/your_datapkg")
```
'''

Then do the same for the `library()` so they can load your package.

### A good documented README file matters! It's free marketing and advertising of your package

Tell the world *why* they should use your package. Show use cases and post 
images of plots if your package uses plotting. 




---
# Congrats !! 🥳 🍹

## YOU just made a dataset package!! 


&lt;img height='350'  align='right' src='img/img6.png' alt='search GitHub for your package'&gt;

Search GitHub for your package -&gt;

***Now what?***

- Tell the world ! 
- add this to resume or CV
- make a hex logo for your package
- improve your pkg



---
class: inverse, middle, center

# The End



---
# Thank you 🌷

- **Thank you** RLadies for this opportunity 🍁

Hope you enjoyed this and practice.



![pkgdown](img/hex-pkgdown.png)






    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
